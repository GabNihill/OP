<html>
    <script language="javascript">

        function hola() {
            var techField = document.getElementById("techfield");
            var subTypeField = document.getElementById("subtypefield");
            var mselect  =  document.getElementById("typeselect");
            var mselectvalue = mselect.options[mselect.selectedIndex].value;
            if(mselectvalue == "leisure") {
                subTypeField.style.display = "inline";
                techField.style.display = "none";
            } else {
                subTypeField.style.display = "none";
                techField.style.display = "inline";
            }
        }
    </script>

  <body>
    <h1>Ajouter un produit</h1>
    <form method="POST" action="/">
        <input type="text" name="title" placeholder="Titre">
        <select onchange="hola();" name="type" id="typeselect">
          <option value="leisure">Loisir</option>
          <option value="tech">Technique</option>
        </select>
        <input type="text" name="tech" placeholder="Technologie" id="techfield" style="display : none">
        <select id="subtypefield" name="subtype" style="display : inline">
            <option value="dvd">DVD</option>
            <option value="manga">Manga</option>
            <option value="bd">BD</option>
        </select>
        <input type="text" name="barcode" placeholder="Code barre">
        <input type="submit" value="Ajouter">
    </form>

    <h1>Produits</h1>
    <table>
      {% for item in items %}
        <tr>
          <td>
            {{item.name}} {{item.type}}
          </td>
          <td>
            <form method="POST" action="./update" style="display: inline">
              <input type="hidden" value="{{item.name}}" name="oldtitle">
              <input type="text" value="{{item.name}}" name="newtitle">
              <input type="submit" value="Update">
            </form>
          </td>
          <td>
            <form method="POST" action="./delete" style="display: inline">
              <input type="hidden" value="{{item.name}}" name="title">
              <input type="submit" value="Delete">
            </form>
          </td>
        </tr>
      {% endfor %}
    </table>

  <a href="{{ url_for('search') }}">Search page</a>
  </body>
</html>